<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SkyFrost • Server Hytale ITA</title>

  <style>
    :root{
      --bg:#070a12;
      --panel: rgba(255,255,255,.06);
      --border: rgba(255,255,255,.10);
      --txt:#eaf0ff;
      --muted:#a9b6d3;
      --acc:#7dd3fc;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      color:var(--txt);
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(125,211,252,.14), transparent 55%),
        radial-gradient(900px 600px at 80% 10%, rgba(99,102,241,.12), transparent 55%),
        linear-gradient(180deg, #050711, var(--bg));
      font-family: system-ui, Arial;
    }

    a{color:inherit;text-decoration:none}

    .container{max-width:1100px;margin:0 auto;padding:26px 16px 70px}

    .nav{
      position:sticky;
      top:0;
      backdrop-filter: blur(10px);
      background: rgba(7,10,18,.55);
      border-bottom: 1px solid var(--border);
    }

    .nav-inner{
      max-width:1100px;
      margin:0 auto;
      padding:14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }

    .brand{font-weight:900;font-size:18px}

    .links{display:flex;gap:14px;color:var(--muted)}
    .links a:hover{color:var(--txt)}

    .auth{display:flex;gap:6px;align-items:center}

    .btn{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:var(--txt);
      padding:10px 12px;
      border-radius:12px;
      font-weight:650;
      display:inline-block;
    }

    .btn.primary{
      border:none;
      background: linear-gradient(90deg, #22d3ee, #60a5fa);
      color:#07101f;
      font-weight:800;
    }

    .hello{
      font-size:13px;
      color:var(--muted);
      padding:8px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      display:none;
    }

    .hero-card{
      border:1px solid var(--border);
      background: var(--panel);
      border-radius:20px;
      padding:22px;
      margin-top:20px;
    }

    h1{margin:10px 0 6px;font-size:44px}
    p{margin:0;color:var(--muted)}

    .cta{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap}

    .quick{
      margin-top:14px;
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:10px;
    }

    .quick-item{
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px;
    }

    .quick-item .k{font-size:12px;color:var(--muted)}
    .quick-item .v{font-weight:800;margin-top:4px}

    /* STATUS */
    .status-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border:1px solid var(--border);
      border-radius:999px;
      padding:6px 10px;
      margin-top:4px;
    }

    .dot{
      width:10px;height:10px;border-radius:999px;
    }

    .dot.online{background:#22c55e;}
    .dot.offline{background:#ef4444;}
    .dot.maintenance{background:#f59e0b;}
    .dot.dev{background:#60a5fa;}

    .news{
      margin-top:20px;
      border:1px solid var(--border);
      background: var(--panel);
      border-radius:18px;
      padding:16px;
    }

    .footer{
      margin-top:22px;
      color:var(--muted);
      font-size:13px;
    }
  </style>
</head>

<body>

<header class="nav">
  <div class="nav-inner">

    <div class="brand">SkyFrost</div>

    <nav class="links">
      <a href="/wiki.html">Wiki</a>
      <a href="/supporto.html">Supporto</a>
      <a href="#news">News</a>
    </nav>

    <div class="auth">
      <span id="nav-hello" class="hello"></span>
      <a class="btn" id="nav-login" href="/api/login">Login</a>
      <a class="btn" id="nav-dashboard" href="/dashboard.html">Dashboard</a>
      <a class="btn" id="nav-logout" href="/api/logout" style="display:none;">Logout</a>
      <a class="btn primary" href="http://discord.skyfrost.it/" target="_blank">Discord</a>
    </div>

  </div>
</header>

<main class="container">

  <section class="hero-card">
    <h1>SkyFrost</h1>
    <p>Server Hytale italiano — entra nella community.</p>

    <div class="cta">
      <a class="btn primary" href="http://discord.skyfrost.it/" target="_blank">Unisciti al Discord</a>
      <a class="btn" href="/wiki.html">Guarda la Wiki</a>
      <a class="btn" href="/supporto.html">Apri un Ticket</a>
    </div>

    <div class="quick">
      <div class="quick-item">
        <div class="k">IP</div>
        <div class="v">play.skyfrost.it</div>
      </div>

      <div class="quick-item">
        <div class="k">Discord</div>
        <div class="v">discord.skyfrost.it</div>
      </div>

      <div class="quick-item">
        <div class="k">Status</div>

        <div class="status-pill">
          <span class="dot dev" id="sf-status-dot"></span>
          <span id="sf-status-text">In sviluppo</span>
        </div>

      </div>
    </div>
  </section>

  <section class="news" id="news">
    <h3>News di Hytale</h3>
    <p>Le news vengono caricate automaticamente.</p>
  </section>

  <div class="footer">
    © <span id="y"></span> SkyFrost
  </div>

</main>

<script>
document.getElementById("y").textContent = new Date().getFullYear();

const SKYFROST_STATUS = "dev";

(function applyStatus(){
  const dot = document.getElementById("sf-status-dot");
  const text = document.getElementById("sf-status-text");

  const map = {
    online: { cls: "online", label: "Online" },
    offline: { cls: "offline", label: "Offline" },
    maintenance: { cls: "maintenance", label: "Manutenzione" },
    dev: { cls: "dev", label: "In sviluppo" },
  };

  const s = map[SKYFROST_STATUS] || map.dev;
  dot.className = "dot " + s.cls;
  text.textContent = s.label;
})();

async function refreshAuth(){
  try{
    const r = await fetch("/api/me");
    const j = await r.json();

    const hello = document.getElementById("nav-hello");
    const login = document.getElementById("nav-login");
    const logout = document.getElementById("nav-logout");
    const dash = document.getElementById("nav-dashboard");

    if(j.loggedIn){
      hello.style.display="inline-block";
      hello.textContent="Ciao, "+j.user.username;
      login.style.display="none";
      logout.style.display="inline-block";
      dash.href="/dashboard.html";
    }else{
      dash.href="/api/login";
    }
  }catch{}
}

refreshAuth();
</script>

</body>
</html>